<!DOCTYPE html>
<html>
<head>
<title>three.js playpen</title>
<meta charset="UTF-8">
<link rel="canonical" href="http://foldoc.org/pub/js/three.html">
</head>
<body style="overflow: hidden">
<script src="https://cdn.jsdelivr.net/npm/three/build/three.min.js"></script>
<script>
"use strict";
const pi = Math.PI;
// https://threejs.org/docs/#api/en/math/Vector3
const xUnitVector = new THREE.Vector3(1, 0, 0)
const yUnitVector = new THREE.Vector3(0, 1, 0)
const zUnitVector = new THREE.Vector3(0, 0, 1)
let camera, spit, renderer, scene;
let theta = 0;

init();

function init() {
  // https://threejs.org/docs/#api/en/cameras/PerspectiveCamera
  // A camera looks down its local, negative z-axis, i.e. into the screen
  camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.1, 100);
  camera.position.z = 20;

  renderer = new THREE.WebGLRenderer({ antialias: true });
  document.body.appendChild(renderer.domElement);
  const radius = 0.7;
  const length = 20;
  const spitGeometry = new THREE.CylinderGeometry(radius, radius, length, 12);
  // https://threejs.org/docs/#api/en/materials/Material
  const material = new THREE.MeshNormalMaterial({ wireframe: false });
  // https://threejs.org/docs/#api/en/objects/Mesh
  spit = new THREE.Mesh(spitGeometry, material);
  spit.position.set(2, 1, 0);
  spit.rotation.z = pi/2; // Rotate from along the y axis to along the x axis
  spit.rotation.y = 0.7;  // Rotate about y to give perspective
  restart();
}

function restart() {
  renderer.setSize(window.innerWidth-17, window.innerHeight-15);
  scene = new THREE.Scene();
  scene.add(spit);
  render();
}

function render() {
  spit.rotateOnAxis(yUnitVector, 0.01);
  renderer.render(scene, camera);
  requestAnimationFrame(render);
}

window.onresize = function debounceResize() {
	if (window.onresize.timeout) clearTimeout(window.onresize.timeout);
	window.onresize.timeout = setTimeout(() => {
		const { innerWidth, innerHeight } = window;
		const shape = `${innerWidth}x${innerHeight}`;
		if (shape == (window.onresize.shape || '')) return;
		window.onresize.shape = shape;
		restart();
	}, 1E3);
};
</script>
</body>
</html>
