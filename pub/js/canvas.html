<body>
<!--
   start "" "%USERPROFILE%/Projects/FOLDOC/foldoc/pub/misc/canvas.html"
   http://foldoc.org/pub/misc/canvas.html
  -->
<canvas id="canvas" style="border: solid">No canvas :-(</canvas>
<script>
var d = 2;
var dc = 0.5;
var ctx, x, y, r, g, b;
clear();
setInterval(draw, 0);

function clear()
{
	var m = 22; // Min margin with no scroll bars
	can = document.getElementById("canvas");
	can.onclick = go_full_screen;
	window.onresize = go_full_screen;
	can.width = window.innerWidth - m;
	can.height = window.innerHeight - m;
	ctx = can.getContext('2d');
	reset();
}

function go_full_screen()
{
	// Must be initiated by user action
	document.documentElement.webkitRequestFullScreen();
	setTimeout(clear, 50);
};

function reset()
{
	x = ctx.canvas.width/2;
	y = ctx.canvas.height/2;
	r = 128;
	g = 128;
	b = 128;
}

function draw()
{
	for (var i = 0; i < 2000; i++) draw1();
	if (Math.random() < 0.002) { reset() }
}

function draw1()
{
	ctx.beginPath();
	ctx.moveTo(x, y);
    x += d*(Math.random()-0.5);
    y += d*(Math.random()-0.5);
	// console.log(x + "," + y);
    r += dc*(Math.random()-0.5);
    g += dc*(Math.random()-0.5);
    b += dc*(Math.random()-0.5);
    ctx.strokeStyle = "rgb(" + Math.floor(r) + "," + Math.floor(g) + "," + Math.floor(b) + ")";
    ctx.lineTo(x, y);
	// ctx.endPath
	ctx.stroke();
}

// Local variables:
// compile-command: "..\\..\\..\\sync.bat"
// compile-command: "canvas.html"
// End:
</script>
</body>
